#!/bin/bash

# Pre-commit hook: ìë™ ì½”ë“œ í¬ë§·íŒ… ë° ê²€ì¦
echo "ğŸ¨ ì½”ë“œ í¬ë§·íŒ… í™•ì¸ ì¤‘..."

# Staged íŒŒì¼ ì¤‘ .ts, .md, .json íŒŒì¼ë§Œ ê°€ì ¸ì˜¤ê¸°
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(ts|md|json)$')

if [ -z "$STAGED_FILES" ]; then
    echo "âœ… í¬ë§·íŒ…í•  íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤."
    exit 0
fi

# Prettierë¡œ staged íŒŒì¼ í¬ë§·íŒ…
echo "ğŸ”§ Prettierë¡œ íŒŒì¼ í¬ë§·íŒ… ì¤‘..."
echo "$STAGED_FILES" | xargs prettier --write

# í¬ë§·íŒ…ëœ íŒŒì¼ì„ ë‹¤ì‹œ ìŠ¤í…Œì´ì§•
echo "$STAGED_FILES" | xargs git add

echo "âœ… ì½”ë“œ í¬ë§·íŒ… ì™„ë£Œ!"
exit 0
